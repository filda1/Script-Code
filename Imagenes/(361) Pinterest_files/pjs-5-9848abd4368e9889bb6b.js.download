webpackJsonp([5,67],{"9bGG":function(e,t,n){"use strict";t.a=function(e){return function(t){function n(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return t=function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;return s(e)}(this,(e=i(n)).call.apply(e,[this].concat(o))),l(s(s(t)),"state",{isHovering:!1}),l(s(s(t)),"handlers",{onMouseOver:function(){return t._setHover(!0)},onMouseLeave:function(){return t._setHover(!1)}}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(n,t),function(e,t,n){t&&o(e.prototype,t);n&&o(e,n)}(n,[{key:"componentDidMount",value:function(){h(this)}},{key:"componentWillUnmount",value:function(){this.hoverTimer&&clearTimeout(this.hoverTimer),v(this)}},{key:"_setHover",value:function(e){var t=this;this.hoverTimer&&clearTimeout(this.hoverTimer),this.hoverTimer=e&&p?setTimeout(function(){return t._setHover(e)},d):setTimeout(function(){e!==t.state.isHovering&&t.setState({isHovering:e})},u)}},{key:"render",value:function(){return r.createElement(e,Object.assign({},this.props,{hoverHandlers:this.handlers,isHovering:this.state.isHovering}))}}]),n}(r.Component)};var r=n("d6ZO");n.n(r);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=32,d=100,f=null,p=!1,m=[],b=function(){f&&clearTimeout(f),p=!0,f=setTimeout(function(){p=!1},d)},h=function(e){0===m.length&&window.addEventListener("scroll",b),m.push(e)},v=function(e){var t=m.indexOf(e);m.splice(t,1),0===m.length&&window.removeEventListener("scroll",b)}},Hdz3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.onDismiss;return a.a.createElement(s.a,{name:"web_contact_requests_inbox",activate:!1},function(e){var n=e.customActivate;return a.a.createElement("div",{className:"NewsConversationsDropdown"},a.a.createElement("div",{className:"content"},a.a.createElement(c.b,{maxHeight:n?500:void 0},a.a.createElement(i.c,null,function(e){return a.a.createElement(o.a,{requestContext:e,onDismiss:t,activateContactRequestsInboxExperiment:n})}))))})};var r=n("d6ZO"),a=n.n(r),o=n("lVil"),i=n("dZgC"),c=n("gEaE"),s=n("6oz1")},Lgi6:function(e,t,n){"use strict";var r=n("hSTm"),a=n.n(r),o={get:function(e){a()().then(function(t){var n=t.default;n.load([],"https://apis.google.com/js/client:platform.js","gplus"),n.ready("gplus",function(){e(window.gapi)})})}};t.a=o},PrM5:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(e){var t;return r(t={},a,{connected:e.connected_to_facebook||!1}),r(t,i,{connected:e.connected_to_google||!1}),r(t,c,{connected:e.connected_to_youtube||!1}),r(t,s,{connected:!!e.gplus_url,url:e.gplus_url}),r(t,l,{connected:e.connected_to_microsoft||!1}),r(t,o,{connected:!!e.twitter_url,url:e.twitter_url}),r(t,u,{connected:e.connected_to_etsy||!1}),r(t,d,{connected:e.connected_to_instagram||!1}),t};var a="facebook",o="twitter",i="google",c="youtube",s="gplus",l="microsoft",u="etsy",d="instagram"},Svvu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n("hlP+"),o=n.n(a),i=n("BVzu"),c=n("XZ9g"),s=n.n(c),l=n("/4D9"),u=n.n(l),d=n("Lgi6"),f=n("W/Cr"),p=n("bYE1"),m=n("DLm7"),b=n("EAiy");function h(){}Object.assign(h.prototype,o.a),Object.assign(h.prototype,{connect:function(e,t){var n=this;(t=Object.assign({},{success:function(){},error:function(){},complete:function(){}},t)).rerequest_facebook_email?u()().then(function(e){e.default.ensureInit(function(e){e.login(function(e){var n,r,a=e.authResponse;a&&(n=(n=a.grantedScopes)?n.split(","):[],r=a.userID);var o=n.find(function(e){return"email"===e}),i={id:r};"connected"===e.status&&o?t.success(i):t.error(i),t.complete()},{scope:"email",auth_type:"rerequest",return_scopes:!0})},b.a)}):"gplus"===e?d.a.get(function(e){Object(p.a)().then(function(){e.auth2.getAuthInstance().grantOfflineAccess().then(function(e){t.success({one_time_code:e.code,redirect_uri:"postmessage"})}).catch(function(e){t.error(e)})})}):s()().then(function(r){var a=r.default.getWindowOptions(),o=window.open("/connect/"+e+"/","",a);if(!o)return i.default.showError(f.a._("You must enable popups!")),void t.error({network:e,alertedUpstream:!0});var c=m.a.setInterval(function(){o.closed&&(clearInterval(c),n.handleComplete({network:e,error_message:"Window closed."}))},1e3);n.once("connect:"+e,function(e){clearInterval(c),e.error_message?t.error(e):t.success(e),t.complete()})})},complete:function(e){this.handleComplete(e)},handleComplete:function(e){var t="connect:"+e.network;if("facebook"===e.network){var n=e.id;n&&"string"!=typeof n&&(e.error_message="Facebook id must be of string type")}this.trigger(t,e)}}),Object.assign(h,{instance:function(){return r||(r=new h),r},FACEBOOK:"facebook",TWITTER:"twitter",GOOGLE:"google",YOUTUBE:"youtube",GPLUS:"gplus",MICROSOFT:"microsoft",ETSY:"etsy"}),window.addEventListener("message",function(e){var t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");e.origin===t&&"social-connect-complete"===e.data.type&&h.instance().complete(e.data)}),t.default=h},T0l7:function(e,t,n){"use strict";t.c=function(e,t){return i.a.create("BoardEmailInviteResource",{board_id:e,emails:t}).callCreate()},t.d=function(e,t){return i.a.create("BoardInviteResource",{board_id:e,invited_user_ids:t}).callCreate()},t.a=function(e,t){return function(n){var o=i.a.create("BoardInviteResource",{board_id:e,invited_user_id:t});return o.callUpdate().then(function(){r.a.trackEvent(c,"success"),a.a.instance.publish(e,"boardApprovedCollaboratorInvite",{userId:t})}).catch(function(){return r.a.trackEvent(c,"error")})}},t.b=function(e,t,n){return function(r){var o=e.invited_user,c=e.status,s=e.board.id,l=i.a.create("accepted"===c?"BoardCollaboratorResource":"BoardInviteResource",{ban:n,board_id:s,field_set_key:"boardEdit",invited_user_id:o.id}).callDelete({showError:!1}).then(function(){a.a.instance.publish(s,"boardWriteAccessUpdated"),n&&a.a.instance.publish(s,"boardBannedCollaborator"),t&&(a.a.instance.publish("currentUser","boardRemovedCollaboratorSelf"),a.a.instance.publish(s,"boardRemovedCollaboratorSelf"))});return l}};var r=n("/e0Y"),a=n("Cjb7"),o=n("THYI"),i=n.n(o),c="collaborator_approve_invite"},U7FU:function(e,t,n){"use strict";var r=n("d6ZO"),a=n.n(r),o=n("DUIN"),i=n("GGB8"),c=n.n(i),s=n("IaRT"),l=(n.n(s),n("gEaE"));function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b,h,v,y=[["fullWrapper"],["leftWrapper halfWrapper","rightWrapper halfWrapper isWholeHalf"],["leftWrapper halfWrapper","rightWrapper halfWrapper smallImage top","rightWrapper halfWrapper smallImage bottom"]],g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,p(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,r["Component"]),n=t,(o=[{key:"getUsersToShow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this.props.viewerId;return void 0!==n&&(t=t.filter(function(e){return e.id!==n})),t.concat(e.map(function(e){return{full_name:e,first_name:e,username:e}})).slice(0,3)}},{key:"render",value:function(){var e=this.props,t=e.board,n=e.emails,r=e.shouldLink,o=e.size,i=e.users,s=this.getUsersToShow(n,i),u=s.length<=3?y[s.length-1]:[];return t?function(e,t){var n=e.name,r=e.image_thumbnail_url;return a.a.createElement("div",{className:c()("Image","Module","boardMessageRep",t)},a.a.createElement("img",{alt:n,src:r}))}(t,o):s.length>0?function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=arguments.length>2?arguments[2]:void 0;arguments.length>3&&arguments[3];return a.a.createElement(l.b,{display:"flex",alignItems:"center"},a.a.createElement(l.l,{collaborators:t.map(function(e,t){return{name:e.full_name||e.email||e.username||"user ".concat(t),src:e.is_default_image?void 0:e.image_large_url||e.image_medium_url}}),size:{small:"sm",medium:"md",normal:"lg"}[e]}))}(o,u,s,r):null}}])&&d(n.prototype,o),i&&d(n,i),t}();v={shouldLink:!1,size:"medium"},(h="defaultProps")in(b=g)?Object.defineProperty(b,h,{value:v,enumerable:!0,configurable:!0,writable:!0}):b[h]=v,t.a=Object(o.connect)(function(e){var t=e.viewer;return{viewerId:t.isAuth?t.id:null}})(g)},XSNT:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n("d6ZO"),a=n.n(r),o=n("IaRT");n.n(o);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var d=function(e){function t(e,n){var r,a,o,c,l,d;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,o=s(t).call(this,e,n),r=!o||"object"!==i(o)&&"function"!=typeof o?u(a):o,c=u(u(r)),d=function(e){r.props.onChange&&r.props.onChange(e.target.value),r.setState({value:e.target.value,hasChanged:!0})},(l="handleChange")in c?Object.defineProperty(c,l,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[l]=d,r.state={isFocused:r.props.focused||!1,value:r.props.value,hasChanged:void 0!==r.props.value},r}var n,o,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){this.state.isFocused&&this._input.focus()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({value:e.value})}},{key:"getId",value:function(){return this.props.id}},{key:"getValue",value:function(){return this.state.value}},{key:"focus",value:function(){this._input.focus()}},{key:"render",value:function(){var e=this;return a.a.createElement("input",{autoComplete:this.props.autoComplete,className:this.props.className,disabled:this.props.disabled?"disabled":"",id:this.props.id,name:this.props.name,onBlur:this.props.onBlur?this.props.onBlur.bind(this):null,onChange:this.handleChange,onClick:this.props.onClick?this.props.onClick.bind(this):null,onFocus:this.props.onFocus?this.props.onFocus.bind(this):null,onKeyDown:this.props.onKeyDown?this.props.onKeyDown.bind(this):null,placeholder:this.props.placeholder,ref:function(t){e._input=t},style:this.props.style,type:this.props.type,value:this.state.value||""})}}])&&c(n.prototype,o),d&&c(n,d),t}();d.defaultProps={type:"text"}},XZ9g:function(e,t,n){e.exports=function(){return new Promise(function(e){n.e(68).then(function(t){e(n("0YTL"))}.bind(null,n)).catch(n.oe)})}},bYE1:function(e,t,n){"use strict";var r=n("BAXv"),a=n("85jk"),o={scope:"profile email",client_id:r.a.GEN.templateConst.settings.GPLUS_CLIENT_ID,app_package_name:r.a.GEN.templateConst.settings.GPLUS_APP_PACKAGE_NAME,access_type:"offline",cookie_policy:"single_host_origin"},i=function(e){return Object(a.a)("unauth_web.gapi_auth2_load.success"),e()};t.a=function(){return new Promise(function(e,t){window.gapi.auth2?window.gapi.auth2.init(o).then(function(){return i(e)}):window.gapi.load("auth2",{callback:function(){window.gapi.auth2.init(o).then(function(){return i(e)})},onerror:function(){Object(a.a)("unauth_web.api_auth2_load.error"),t()},timeout:15e3,ontimeout:function(){Object(a.a)("unauth_web.api_auth2_load.timeout"),t()}})})}},cD7N:function(e,t,n){"use strict";var r=n("Cjb7"),a=n("THYI"),o=n.n(a),i=n("Svvu"),c=n("DLm7"),s=n("EAiy");function l(){}Object.assign(l.prototype,{handleConnect:function(e,t,n){if(t&&!s.a.isLimitedLogin()){var r={success:function(r){var a={network:e,data:r};this._internalConnectNetwork(t,a,n)}.bind(this),error:function(e){n.error&&n.error(e)},complete:function(){n.complete&&n.complete()}};this._externalConnectNetwork(e,t,r)}else{var a={network:e};this._internalConnectNetwork(t,a,n)}},updateConnectStatus:function(){o.a.create("UserResource",{user_id:s.a.get("id"),username:s.a.get("username"),field_set_key:"social_connect"}).callGet().then(function(e){var t=e.resource_response.data;s.a.set(t),r.a.instance.publish("currentUser","socialNetworkUpdated",t)})},_externalConnectNetwork:function(e,t,n){t?i.default.instance().connect(e,n):n.success&&n.success({})},_internalConnectNetwork:function(e,t,n){var r=this,a=o.a.create("UserSocialNetworkResource",t);(e?a.callCreate():a.callDelete()).then(function(e){r.updateConnectStatus(),n.success&&n.success(e)},function(e){n.error&&e instanceof Object&&n.error(e)}).finally(function(){n.complete&&n.complete()})},_getResourceNameForNetworkFriends:function(e){var t=null;switch(e){case i.default.FACEBOOK:t="UserFacebookFriendsResource";break;case i.default.TWITTER:t="UserTwitterFriendsResource";break;case i.default.GOOGLE:t="UserGmailFriendsResource";break;case i.default.MICROSOFT:t="UserMicrosoftFriendsResource";break;default:return}return t},_handleFriendsImported:function(e,t,n){var a={resource:t,network:e,error:n};r.a.instance.publish("site","friendImportCompleted",a)},pollForFriends:function(e,t){var n=this,r=(t=t||{}).resourceOptions||{},a=this._getResourceNameForNetworkFriends(e);if(a){var i=o.a.create(a,r);i.callGet({showError:!1}).then(function(){var r=t.success;r&&r(i),n._handleFriendsImported(e,i,null)},function(r){if(110===r.api_error_code)c.a.setTimeout(function(){n.pollForFriends(e,t)},1e3);else{var a=t.error;a&&a(),n._handleFriendsImported(e,i,r)}})}}});var u=null;l.instance=function(){return u||(u=new l),u},t.a=l},cy6F:function(e,t,n){"use strict";t.a=i;var r=n("d6ZO"),a=n.n(r),o=n("IaRT");n.n(o);function i(e){var t=e.mask,n=e.loading,r=e.size;return a.a.createElement("div",null,t&&a.a.createElement("div",{className:"moduleMask",style:{bottom:0,left:0,right:0,top:0}}),n&&a.a.createElement("div",{className:"Spinner"},a.a.createElement("div",{className:"small"===r?"spinnerSmall":"spinnerMedium"})))}i.defaultProps={loading:!0,mask:!0,size:"medium"}},fvzG:function(e,t,n){"use strict";t.h=function(e){return{type:"CONVERSATION_SHOW",payload:{id:e}}},t.e=function(e){return{type:"CONVERSATION_HIDE",payload:{id:e}}},t.g=function(e){return{type:"CONVERSATION_OPEN",payload:{id:e}}},t.b=function(e){return{type:"CONVERSATION_CLOSE",payload:{id:e}}},t.c=o,t.d=function(e){return{type:"CONVERSATION_DELETE",payload:{id:e}}},t.f=function(e,t){return{type:"CONVERSATION_MESSAGES_UPDATE",payload:{conversationId:e,messages:t}}},t.a=function(){return function(e){var t=a.a.create("ConversationBadgeResource",{});t.callDelete({showError:!1}),e({type:"CONVERSATION_BADGE_RESET"})}},t.k=i,t.j=c,t.i=function(e,t,n){var r,s=new Promise(function(u){(r=function(r,s){var d=t.text,f=t.pinId,p=t.boardId,m=t.userId,b=t.didItId,h=s();function v(){var t=a.a.create("ConversationMessagesResource",{conversation_id:e,text:d,pin:f,board:p,user:m,user_did_it_data:b,source:n}),o="".concat(l());t.callCreate().then(function(t){r(c(e,o,t.resource_response.data.id))}),r(i(e,{text:d,sender:h.viewer,created_at:(new Date).toString(),created_ms:Date.now(),id:o,board:null,event_type:null,pin:f?h.pins[f]:null,type:"message",user_did_it_data:null,user:null})),u()}h.conversations.data[e]?v():a.a.create("ConversationResource",{conversation_id:e}).callGet().then(function(e){var t=e&&e.resource_response&&e.resource_response.data;r(o(t)),v()})}).getPromise=function(){return s}});return r};var r=n("THYI"),a=n.n(r);function o(e){return{type:"CONVERSATION_CREATE",payload:e}}function i(e,t){return{type:"MESSAGE_SEND_PENDING",payload:{id:e,message:t}}}function c(e,t,n){return{type:"MESSAGE_SEND_PENDING_CLEAR",payload:{id:e,messageId:t,newMessageId:n}}}var s,l=(s=0,function(){return s++})},hSTm:function(e,t,n){e.exports=function(){return new Promise(function(e){n.e(84).then(function(t){e(n("/+lb"))}.bind(null,n)).catch(n.oe)})}},lVil:function(e,t,n){"use strict";var r=n("d6ZO"),a=n.n(r),o=n("DUIN"),i=n("5tOk"),c=n("W/Cr"),s=n("THYI"),l=n.n(s),u=n("fvzG"),d=n("gEaE");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=m(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==f(a)&&"function"!=typeof a?h(r):a,v(h(h(n)),"state",{contactRequestCompleted:!1,isAccepted:!1,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1}),v(h(h(n)),"handleInviteAcceptResponse",function(){n.setState({isAcceptButtonLoading:!0,isIgnoreButtonLoading:!1}),l.a.create("ContactRequestAcceptResource",{contact_request:n.props}).callUpdate().then(function(e){var t=n.props.dispatch;if(n.setState({isAccepted:!0,contactRequestCompleted:!0,isAcceptButtonLoading:!1}),e&&e.resource_response.data){var r=e.resource_response.data;t(Object(u.c)(r)),t(Object(u.h)(r.id)),t(Object(u.g)(r.id))}})}),v(h(h(n)),"handleInviteDeclineResponse",function(){var e=n.props.onDeclineRequest;n.setState({isAcceptButtonLoading:!1,isIgnoreButtonLoading:!0}),l.a.create("ContactRequestIgnoreResource",{contact_request:n.props}).callDelete().then(function(){n.setState({isAccepted:!1,contactRequestCompleted:!0,isIgnoreButtonLoading:!1}),e&&e()})}),n}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,r["PureComponent"]),n=t,(o=[{key:"renderRequestText",value:function(e,t,n){if(e){var r=e.name,a=e.url;if(r&&a)return i.i(c.a._('<a href="/{{ senderUsername }}/">{{ senderName }}</a> invited you to collaborate on <a href="{{ boardUrl }}">{{ boardName }}</a>'),{boardName:r.toString(),boardUrl:a.toString(),senderName:t,senderUsername:n})}return i.i(c.a._('<a href="/{{ senderUsername }}/">{{ senderName }}</a> wants to send a message to you'),{senderName:t,senderUsername:n})}},{key:"renderAcceptedBoard",value:function(){var e=this.props.board;if(!e)return null;var t=e.name,n=e.url,r=e.image_thumbnail_url;return a.a.createElement(d.t,{href:n},a.a.createElement(d.b,{paddingX:2,paddingY:4,display:"flex"},a.a.createElement(d.u,{shape:"rounded",width:50,height:50},a.a.createElement(d.p,{alt:t,src:r,naturalHeight:60,naturalWidth:60})),a.a.createElement(d.b,{paddingX:3,flex:"grow",display:"flex",direction:"column",justifyContent:"center"},a.a.createElement(d.K,{color:"darkGray",size:"sm",bold:!0,truncate:!0},t),a.a.createElement(d.K,{color:"darkGray",size:"sm"},c.a._("You joined this board","Status message for a group board the user has joined.")))))}},{key:"render",value:function(){var e=this.props,t=e.board,n=e.sender,r=this.state,o=r.contactRequestCompleted,i=r.isAccepted,s=r.isAcceptButtonLoading,l=r.isIgnoreButtonLoading;if(o)return t&&i?this.renderAcceptedBoard():null;var u=n.image_large_url,f=n.full_name,p=n.username;return a.a.createElement(d.b,{paddingX:2,paddingY:4,display:"flex"},a.a.createElement(d.b,{height:40,width:40,flex:"none"},a.a.createElement(d.t,{href:"/"+p+"/"},a.a.createElement(d.a,{name:p,src:u}))),a.a.createElement(d.b,{paddingX:3,flex:"grow"},a.a.createElement(d.b,{marginBottom:3},a.a.createElement(d.K,null,a.a.createElement("span",{dangerouslySetInnerHTML:{__html:this.renderRequestText(t,f,p)}}))),a.a.createElement(d.b,{display:"flex",marginLeft:-1,marginRight:-1},a.a.createElement(d.b,{paddingX:1,flex:"grow"},a.a.createElement(d.c,{disabled:l,onClick:this.handleInviteDeclineResponse,size:"sm",text:c.a._("Decline","ignore contact request")})),a.a.createElement(d.b,{paddingX:1,flex:"grow"},a.a.createElement(d.c,{color:"red",disabled:s,onClick:this.handleInviteAcceptResponse,size:"sm",text:c.a._("Accept","accept contact request")})))))}}])&&p(n.prototype,o),s&&p(n,s),t}(),g=Object(o.connect)()(y);function E(e){var t=e.contactRequests,n=e.onDeclineRequest;if(!t)return null;var r=t.filter(function(e){var t=e.board;return t&&t.name&&t.url});return r.length>0?a.a.createElement("div",null,r.map(function(e,t){return a.a.createElement("div",{key:e.id},0!==t?a.a.createElement(d.j,null):null,a.a.createElement(g,Object.assign({},e,{onDeclineRequest:n})))})):null}var _=n("nM9s"),w=(n("IaRT"),n("U7FU")),C=function(e,t){var n=t.emails,r=t.users;return a.a.createElement("div",null,n&&n.length>0?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e&&0!==e.length){var t=e[0];return a.a.createElement("div",{className:"contactWrapper"},a.a.createElement(w.a,{emails:[t],size:"small"}),a.a.createElement("div",{className:"contactTextInfo"},a.a.createElement("span",{className:"contactName"},t),a.a.createElement("span",{className:"contactDescription"},c.a._("Email friend","on selected contact list"))))}}(n):function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=t[0].id===e?t[1]:t[0],r=n.full_name;return a.a.createElement("div",{className:"contactWrapper"},a.a.createElement(w.a,{size:"small",users:[n]}),a.a.createElement("div",{className:"contactTextInfo"},a.a.createElement("span",{className:"contactName"},r),a.a.createElement("span",{className:"contactDescription"},c.a._("On Pinterest","info about a contact"))))}(r))};function O(e){var t=e.contactItem,n=e.currentUserID,r=e.conversationItem,o=e.handleContactWrapperClick,i=e.isSelected,s=e.isUser,l=e.isEnabledNewMessageExp?a.a.createElement(d.o,{accessibilityLabel:c.a._("selected checkmark"),bgColor:"transparentDarkGray",icon:"check",iconColor:"white",size:"xs"}):a.a.createElement("div",{className:["selectionIndicator","contactCircleRep","selectionIndicator"].join(" ")},a.a.createElement("em",null));return a.a.createElement("a",{className:"conversationContactContainer",key:r.id,onClick:function(){return o(s,t)},onKeyDown:function(){},role:"button",tabIndex:0},C(n,r),i?l:null)}O.defaultProps={isSelected:!1};var k=n("tZWC");function I(e){var t=e.onClickRemove,n=e.tokenizedItems;return r.createElement(d.b,{display:"flex",direction:"row",maxWidth:310,maxHeight:100,wrap:!0,dangerouslySetInlineStyle:{__style:{zIndex:1e3,overflowX:"hidden",overflowY:"auto"}}},n.map(function(e,n){return r.createElement(d.b,{color:"lightGray",shape:"pill",display:"flex",alignItems:"center",direction:"row",justifyContent:"between",width:136,paddingY:1,margin:1,key:"string"!=typeof e?e.id:e},r.createElement(d.b,{maxWidth:100,marginLeft:3},"string"!=typeof e?r.createElement(d.K,{truncate:!0},e.full_name):r.createElement(d.K,{truncate:!0},e)),r.createElement(d.o,{accessibilityLabel:c.a._("Cancel"),bgColor:"lightGray",icon:"cancel",iconColor:"darkGray",onClick:function(){return t(n)},size:"xs"}))}))}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=8,A=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=new Array(i),d=0;d<i;d++)s[d]=arguments[d];return r=this,o=(e=N(t)).call.apply(e,[this].concat(s)),n=!o||"object"!==S(o)&&"function"!=typeof o?x(r):o,T(x(x(n)),"state",{contactCounter:0,selectedEmails:{},selectedUsers:{},tokenizedItems:[],value:""}),T(x(x(n)),"onHandleContactClick",function(e,t){var r=n.state,a=r.selectedEmails,o=r.selectedUsers,i=e?o:a,c=e?t.id:t,s=i[c];i[c]=!s,s?n.removeTokenItem(t):n.addTokenItem(t)}),T(x(x(n)),"getSelectedEmails",function(){var e=n.state.selectedEmails;return Object.keys(e).filter(function(t){return e[t]})}),T(x(x(n)),"getSelectedUsers",function(){var e=n.state.selectedUsers;return Object.keys(e).filter(function(t){return e[t]})}),T(x(x(n)),"handleTypeaheadKeyDown",function(e){var t=n.state,r=t.contactCounter,a=t.selectedEmails,o=t.selectedUsers,i=t.tokenizedItems,c=t.value;if(e.keyCode===P&&r&&!c){var s=i.pop();(!!s.id?o:a)[s.id||s]=!1,n.setState({contactCounter:r-1,tokenizedItems:i})}}),T(x(x(n)),"handleInviteItemClick",function(e,t){var r=n.state,a=r.selectedUsers,o=r.selectedEmails,i=t?a:o,c=e.id||e;i[c]||(i[c]=!0,n.addTokenItem(e))}),T(x(x(n)),"handleRemoveItem",function(e){var t=n.state.tokenizedItems[e];n.removeTokenItem(t)}),T(x(x(n)),"handleSendMessage",function(){var e=n.getSelectedEmails(),t=n.getSelectedUsers(),r=n.props.dispatch;l.a.create("ConversationsResource",{user_ids:t,emails:e,text:null}).callCreate().then(function(e){var t=e&&e.resource_response.data;r(Object(u.c)(t)),r(Object(u.h)(t.id)),r(Object(u.g)(t.id))})}),T(x(x(n)),"addTokenItem",function(e){var t=n.state,r=t.contactCounter,a=t.tokenizedItems;n.setState({contactCounter:r+1,tokenizedItems:a.concat([e]),value:""})}),T(x(x(n)),"removeTokenItem",function(e){var t=n.state,r=t.contactCounter,a=t.tokenizedItems,o=t.selectedUsers,i=t.selectedEmails;(!!e.id?o:i)[e.id||e]=!1,e.id?n.setState({contactCounter:r-1,tokenizedItems:a.filter(function(t){return t.id!==e.id})}):n.setState({contactCounter:r-1,tokenizedItems:(a||[]).filter(function(t){return t!==e})})}),T(x(x(n)),"renderSendMessageButton",function(){return a.a.createElement(_.a,{className:"sendNewMessageButton",hasText:!0,onClick:n.handleSendMessage,showText:!0,text:c.a._("Next","open the new chat"),type:"borderless"})}),T(x(x(n)),"renderCancelMessageButton",function(){var e=n.props.handleCancelNewMessageClick;return a.a.createElement(_.a,{className:"cancelNewMessageView cancelButton",hasText:!0,onClick:e,showText:!0,text:c.a._("Cancel","cancel new message view"),type:"borderless"})}),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,r["Component"]),n=t,(o=[{key:"getContactItem",value:function(e,t,n){var r=e.emails,a=e.users;return n&&a?a[0].id===t?a[1]:a[0]:r[0]}},{key:"render",value:function(){var e=this,t=this.props,n=t.conversationItems,r=t.viewerId,o=this.state,i=o.contactCounter,s=o.selectedUsers,l=o.selectedEmails,u=o.value,f=new Set,p=n.map(function(t,n){var o=t.emails,i=t.users;o||(o=[]),i||(i=[]);var c=i.length+o.length;if(c>0&&c<=2){var u=0===o.length,p=e.getContactItem(t,r,u);if(p){var m=p.id||p;if(!f.has(m))return f.add(m),a.a.createElement(d.d,{key:m},a.a.createElement(O,{className:"conversationContactContainer",contactItem:p,conversationItem:t,currentUserID:r,handleContactWrapperClick:e.onHandleContactClick,isSelected:s[m]||l[m],isUser:u,isEnabledNewMessageExp:!0}))}}return null});return a.a.createElement(d.b,null,a.a.createElement(d.b,{display:"flex",justifyContent:"between",padding:3},a.a.createElement(d.K,{size:"lg",bold:!0},c.a._("New message","title for composing new message")),i>0?this.renderSendMessageButton():this.renderCancelMessageButton()),a.a.createElement(d.b,{display:"flex",marginLeft:2,marginRight:2,shape:"rounded",dangerouslySetInlineStyle:{__style:{border:"#efefef solid 2px",paddingLeft:3}}},a.a.createElement(d.b,{display:"flex",alignItems:"center",marginRight:2},a.a.createElement(d.K,{size:"sm",bold:!0,color:"gray",paddingY:1},c.a._("To:","Text field to type message recipient names"))),a.a.createElement(d.b,{display:"flex",position:"relative",flex:"grow",wrap:!0,direction:"column"},a.a.createElement(I,{tokenizedItems:this.state.tokenizedItems,onClickRemove:this.handleRemoveItem}),a.a.createElement(k.a,{changeOnTextHover:!1,className:"reactNewMessageTypeahead",onChange:function(t){return e.setState({value:t})},onInviteItemClick:this.handleInviteItemClick,onKeyDown:this.handleTypeaheadKeyDown,showInputPlaceholder:!0,value:this.state.value,isComposeMessageExpEnabled:!0}))),u?null:a.a.createElement("div",{className:"contactsContainer",style:{margin:"8px 8px 0 8px"}},p))}}])&&j(n.prototype,o),i&&j(n,i),t}(),B=Object(o.connect)(function(e){return{viewerId:e.viewer.id}})(A),q=n("GGB8"),D=n.n(q),L=n("pN+K"),M=100,z=1e3,U=14;var H=Object(L.b)({name:"ContactRequestsCountGetResource",key:"contactCount"},{allowStale:!1})(function(e){var t,n=e.contactCount,r=e.isInContactRequestsView,o=e.onClick;return n||r?(t=n>z?c.a._("1000+ contact requests","messaging"):n>=M&&n<=z?c.a._("100+ contact requests","messaging"):i.i(c.a.ngettext("{{ contactCount }} contact request","{{ contactCount }} contact requests",n),{contactCount:"".concat(n)}),a.a.createElement(d.b,{dangerouslySetInlineStyle:{__style:{paddingLeft:U,paddingRight:U}},paddingY:1},a.a.createElement("div",{className:"Module ContactRequestsCount"},a.a.createElement(_.a,{className:D()({contactRequestView:r},"isBrioFlat","contactRequestsCount","btn"),hasIcon:r,hasText:!0,onClick:o,text:t,type:"borderless"})))):null});var F=Object(L.b)({name:"ContactRequestsResource",key:"contactRequests"},{allowStale:!1})(function(e){var t=e.contactRequests,n=e.handleCancelViewContactRequests;return t?a.a.createElement("div",{className:"Module ContactRequestsCount"},a.a.createElement(H,{contactCount:t.length,isInContactRequestsView:!0,onClick:n}),a.a.createElement(d.b,{padding:2},a.a.createElement(d.K,{size:"sm"},c.a._("These messages appear from people outside of your networks.","contact requests disclaimer"))),t.map(function(e,t){return a.a.createElement("div",{key:e.id},0!==t?a.a.createElement(d.j,null):null,a.a.createElement(g,e))})):null}),G=n("tmfO");function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Z=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=K(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==W(a)&&"function"!=typeof a?X(r):a,J(X(X(n)),"state",{boardInviteAccepted:!1,boardInvitePending:!0,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1}),J(X(X(n)),"handleInviteResponse",function(e){var t=n.props,r=t.boardInviteItem,a=t.onDeclineRequest,o=r.board,i=void 0===o?{}:o,c=r.invited_user,s=void 0===c?{}:c;n.setState({isAcceptButtonLoading:e,isIgnoreButtonLoading:!e});var u={board_id:i.id,invited_user_id:s.id},d=l.a.create("BoardInviteResource",u);(e?d.callUpdate():d.callDelete()).then(function(){n.setState({boardInviteAccepted:e,boardInvitePending:!1,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1}),e||a()})}),n}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(t,r["Component"]),n=t,(o=[{key:"getBoardRep",value:function(e,t){return a.a.createElement(G.b,{to:t,inline:!0},a.a.createElement(d.u,{width:40,height:40,shape:"rounded"},a.a.createElement(d.p,{alt:"",color:"",naturalWidth:40,naturalHeight:40,src:t,fit:"cover"})))}},{key:"getBoardInfo",value:function(e,t){return a.a.createElement(G.b,{to:t},a.a.createElement(d.K,{bold:!0},e))}},{key:"getInviteeInfo",value:function(e){var t=e.full_name;return Object(i.i)(c.a._("{{ fullName }} invited you to this board"),{fullName:t})}},{key:"getRequesterInfo",value:function(e){var t=e.username,n=e.full_name;return Object(i.i)(c.a._("{{ fullName }} wants to join your board"),{fullName:n,username:t})}},{key:"getJoinedText",value:function(e){var t=e.username,n=e.full_name;return Object(i.i)(c.a._("{{ fullName }} joined your board"),{fullName:n,username:t})}},{key:"render",value:function(){var e=this;if(!this.state.boardInvitePending&&!this.state.boardInviteAccepted)return null;var t=this.props.boardInviteItem,n=t.board,r=t.invited_by_user,o=t.invited_user,i=n.image_cover_url,s=n.name,l=n.url,u=r.id===o.id,f=u?l+"invite":l;return a.a.createElement("div",{className:"BoardInvite Module news"},a.a.createElement(d.b,{paddingX:2,display:"flex",direction:"row",paddingY:4},this.getBoardRep(s,i),a.a.createElement(d.b,{paddingX:3,flex:"grow"},a.a.createElement(d.b,{marginBottom:3},a.a.createElement(G.b,{to:f},a.a.createElement(d.K,{size:"sm",bold:!0},s)),this.state.boardInvitePending?a.a.createElement(d.K,{size:"sm"},u?this.getRequesterInfo(r):this.getInviteeInfo(r)):a.a.createElement(d.K,{size:"sm"},u?this.getJoinedText(r):c.a._("You joined this board","board invites"))),this.state.boardInvitePending&&a.a.createElement(d.b,{display:"flex",marginStart:-1,marginEnd:-1},a.a.createElement(d.b,{flex:"grow",paddingX:1},a.a.createElement(d.c,{disabled:this.state.isIgnoreButtonLoading,onClick:function(){return e.handleInviteResponse(!1)},text:c.a._("Decline","decline board collaborator invite or request"),size:"sm"})),a.a.createElement(d.b,{flex:"grow",paddingX:1},a.a.createElement(d.c,{color:"red",disabled:this.state.isAcceptButtonLoading,onClick:function(){return e.handleInviteResponse(!0)},text:c.a._("Accept","accept board invite"),size:"sm"}))))))}}])&&V(n.prototype,o),s&&V(n,s),t}(),Q=n("FfPm");function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oe=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=te(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==$(a)&&"function"!=typeof a?re(r):a,ae(re(re(n)),"state",{contactRequestCompleted:!1,isAccepted:!1,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1}),ae(re(re(n)),"handleInviteAcceptResponse",function(){n.setState({isAcceptButtonLoading:!0,isIgnoreButtonLoading:!1}),l.a.create("ContactRequestAcceptResource",{contact_request:n.props}).callUpdate().then(function(e){var t=n.props.dispatch;if(n.setState({isAccepted:!0,contactRequestCompleted:!0,isAcceptButtonLoading:!1}),e&&e.resource_response.data){var r=e.resource_response.data;t(Object(u.c)(r)),t(Object(u.h)(r.id)),t(Object(u.g)(r.id))}})}),ae(re(re(n)),"handleInviteDeclineResponse",function(){var e=n.props.onDeclineRequest;n.setState({isAcceptButtonLoading:!1,isIgnoreButtonLoading:!0}),l.a.create("ContactRequestIgnoreResource",{contact_request:n.props}).callDelete().then(function(){n.setState({isAccepted:!1,contactRequestCompleted:!0,isIgnoreButtonLoading:!1}),e()})}),n}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,r["PureComponent"]),n=t,(o=[{key:"renderRequestText",value:function(e,t){if(e){var n=e.name,r=e.url;if(n&&r)return i.i(c.a._("{{ senderName }} invited you to this board"),{senderName:t})}return i.i(c.a._("{{ senderName }} wants to send a message to you"),{senderName:t})}},{key:"renderAcceptedBoard",value:function(){var e=this.props.board;if(!e)return null;var t=e.name,n=e.url,r=e.image_thumbnail_url;return a.a.createElement(d.t,{href:n},a.a.createElement(d.b,{paddingX:2,paddingY:4,display:"flex"},a.a.createElement(d.u,{shape:"rounded",width:50,height:50},a.a.createElement(d.p,{alt:t,src:r,naturalHeight:60,naturalWidth:60})),a.a.createElement(d.b,{paddingX:3,flex:"grow",display:"flex",direction:"column",justifyContent:"center"},a.a.createElement(d.K,{color:"darkGray",size:"sm",bold:!0,truncate:!0},t),a.a.createElement(d.K,{color:"darkGray",size:"sm"},c.a._("You joined this board","Status message for a group board the user has joined.")))))}},{key:"render",value:function(){var e=this.props,t=e.board,n=e.sender,r=this.state,o=r.contactRequestCompleted,i=r.isAccepted,s=r.isAcceptButtonLoading,l=r.isIgnoreButtonLoading;if(o)return t&&i?this.renderAcceptedBoard():null;var u=n.image_large_url,f=n.full_name,p=n.username;return a.a.createElement(d.b,{paddingX:2,paddingY:4,display:"flex",direction:"row"},a.a.createElement(d.b,{height:40,width:40,flex:"none"},a.a.createElement(d.t,{href:"/"+p+"/",onClick:function(){return Q.default.increment("web.social.contact_request.profile_nav")}},a.a.createElement(d.a,{name:p,src:u}))),a.a.createElement(d.b,{paddingX:3,flex:"grow"},a.a.createElement(d.b,{marginBottom:3},t?a.a.createElement(d.t,{href:t.url},a.a.createElement(d.K,{bold:!0,size:"sm"},t.name)):a.a.createElement(d.t,{href:"".concat(p),onClick:function(){return Q.default.increment("web.social.contact_request.profile_nav")}},a.a.createElement(d.K,{bold:!0,size:"sm"},f)),a.a.createElement(d.K,{size:"sm"},this.renderRequestText(t,f))),a.a.createElement(d.b,{display:"flex",marginLeft:-1,marginRight:-1},a.a.createElement(d.b,{paddingX:1,flex:"grow"},a.a.createElement(d.c,{disabled:l,onClick:this.handleInviteDeclineResponse,size:"sm",text:c.a._("Decline","ignore contact request")})),a.a.createElement(d.b,{paddingX:1,flex:"grow"},a.a.createElement(d.c,{color:"red",disabled:s,onClick:this.handleInviteAcceptResponse,size:"sm",text:c.a._("Accept","accept contact request")})))))}}])&&ee(n.prototype,o),s&&ee(n,s),t}(),ie=Object(o.connect)()(oe),ce=n("JyNp"),se=n("MQ2h"),le=n("suNN");function ue(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var de=function(e,t){return e.created_at&&t.created_at?new Date(e.created_at)>new Date(t.created_at)?-1:1:0};var fe=Object(se.compose)(Object(ce.b)({name:"ContactRequestsResource",key:"contactRequests"},{allowStale:!1}),Object(ce.b)({name:"BoardOwnerCollaboratorJoinRequestsResource",key:"boardJoinRequests",options:function(e){return{field_set_key:"news"}}},{allowStale:!1}),Object(ce.b)({name:"BoardInvitesResource",key:"boardInvites",options:function(e){return{current_user:!0,field_set_key:"news"}}},{allowStale:!1}))(function(e){var t=e.boardJoinRequests,n=e.boardInvites,a=e.contactRequests,o=e.onClick,i=e.showAllRequests,s=e.handleCancelViewContactRequests;if(!t.isLoaded&&!t.isLoaded&&!t.isLoaded)return null;var l=ue(t.data||[]).concat(ue(n.data||[]),ue(a.data||[])),u=function(){a.refreshData()},f=function(){n.refreshData(),t.refreshData()};l.sort(de);var p=!i&&l.length>2,m=p?l.slice(0,2):l;return r.createElement(r.Fragment,null,i&&r.createElement(d.b,{paddingX:2,paddingY:2,display:"flex",direction:"row",alignItems:"center",justifyContent:"between"},r.createElement(d.b,{column:2},r.createElement(d.o,{icon:"arrow-back",accessibilityLabel:c.a._("Back to inbox","Icon to exit messages feed and go back to inbox"),onClick:s})),r.createElement(d.b,{column:8,overflow:"hidden"},r.createElement(d.K,{bold:!0,align:"center",truncate:!0},c.a._("Requests","Heading for the requests feed, which includes contact requests, board invites, and board join requests"))),r.createElement(d.b,{flex:"grow",column:2})),m.map(function(e){var t=e.type,n=e.id;return"contactrequest"===t?r.createElement(ie,Object.assign({},e,{key:n,onDeclineRequest:u})):"collaboratorinvite"===t?r.createElement(Z,{boardInviteItem:e,key:n,onDeclineRequest:f}):null}),p&&r.createElement(d.b,{width:"100%",paddingX:2,paddingY:2,marginTop:-1},r.createElement(d.c,{text:Object(le.b)(c.a._("See all {{ n }} invites"),{n:l.length}).join(""),size:"sm",color:"white",onClick:o})),r.createElement(d.j,null))}),pe=n("/S3G"),me=n("woYD");function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _e(e){var t=e.name,n=e.emails,r=e.users,o=e.viewerId,i=r.filter(function(e){return e.id!==o});return a.a.createElement(d.b,{dangerouslySetInlineStyle:{__style:{paddingBottom:4}}},a.a.createElement(d.K,{color:"darkGray",size:"sm",bold:!0,truncate:!0},t||i.map(function(e){return e.first_name||e.full_name}).concat(n).join(", ")))}function we(e){var t=e.message,n=e.viewerId,r=t.board,o=t.created_at,s=t.pin,l=t.sender,u=t.text,f=t.user,p=u,m=l.id===n,b=m?c.a._("You","messaging in the inbox, when the viewer(You) sends a pin, board, or profile to another user without text"):l.first_name;return p?p&&m&&(p=c.a._("You","messaging in the inbox, when the viewer(You) sends a message to another user")+": "+p):s?p=i.i(c.a._("{{ senderName }} sent a Pin","messaging"),{senderName:b}):r?p=i.i(c.a._("{{ senderName }} sent a board","messaging"),{senderName:b}):f&&(p=i.i(c.a._("{{ senderName }} sent a user profile","messaging"),{senderName:b})),a.a.createElement(d.b,{display:"flex",direction:"row",flex:"grow",alignItems:"baseline"},a.a.createElement(d.b,{marginRight:2,flex:"shrink",dangerouslySetInlineStyle:{__style:{maxWidth:"80%"}}},a.a.createElement(d.K,{color:"darkGray",size:"sm",truncate:!0},p)),a.a.createElement(d.b,{flex:"none"},a.a.createElement(d.K,{color:"gray",size:"xs",truncate:!0},c.a.getHumanizedTimesince(o,!0))))}function Ce(e){var t=e.board,n=e.pin,r=e.user,o=null;if(n){var i=n.images["236x"]||n.images["136x136"];o=a.a.createElement(d.u,{shape:"rounded",wash:!0,height:60,width:40},a.a.createElement(d.p,{alt:"",src:i.url,naturalWidth:i.width,naturalHeight:i.height,color:n.dominant_color,fit:"cover"}))}else t?o=a.a.createElement(d.u,{shape:"rounded",width:40,height:40},a.a.createElement(d.p,{alt:"",src:t.image_thumbnail_url||"",naturalWidth:60,naturalHeight:60})):r&&(o=a.a.createElement(d.b,{shape:"rounded",width:40,height:40},a.a.createElement(d.a,{name:r.full_name,src:r.image_large_url})));return o?a.a.createElement(d.b,{display:"flex",alignItems:"center",width:30,marginLeft:5,marginRight:6},a.a.createElement(d.b,{display:"block"},o)):null}var Oe=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=ve(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==be(a)&&"function"!=typeof a?ge(r):a,Ee(ge(ge(n)),"state",{isAnimatingOut:!1,unread:n.props.data.unread||0}),Ee(ge(ge(n)),"handleHideConversation",function(e){e.stopPropagation();var t=n.props,r=t.data,a=t.dispatch,o=r.id;l.a.create("ConversationResource",{conversation_id:o}).callDelete({showError:!1}),n.setState({isAnimatingOut:!0}),setTimeout(function(){a(Object(u.d)(o))},500),n.removeConversationChatHead(o),n.logConversationItemHide(o)}),Ee(ge(ge(n)),"handleConversationItemClick",function(){var e=n.props.data;n.setState({unread:0}),e.board||n.showConversationChatHead(e),n.logConversationItemClick()}),Ee(ge(ge(n)),"logConversationItemClick",function(){Object(me.a)(101,{component:54,element:277})}),Ee(ge(ge(n)),"logConversationItemHide",function(e){Object(me.a)(182,{component:54,element:277,conversation_id:e})}),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(t,r["Component"]),n=t,(o=[{key:"showConversationChatHead",value:function(e){var t=this.props.dispatch,n=e.id;t(Object(u.h)(n)),t(Object(u.g)(n)),t(pe.a)}},{key:"removeConversationChatHead",value:function(e){var t=this.props.dispatch;t(Object(u.e)(e)),t(Object(u.b)(e))}},{key:"renderItemContent",value:function(){var e=this.state.isAnimatingOut,t=this.props,n=t.data,r=t.viewerId,o=n.board,i=n.emails,s=n.last_message,l=n.name,u=n.users,f=i||[];return a.a.createElement("div",{className:D()("ConversationListItemReact",{conversationHidden:e})},a.a.createElement(d.b,{display:"flex",alignItems:"center",dangerouslySetInlineStyle:{__style:{marginRight:10}}},a.a.createElement(w.a,{board:o,emails:f,users:u})),a.a.createElement(d.b,{display:"flex",width:"85%",height:"100%"},a.a.createElement(d.b,{flex:"grow",display:"flex",direction:"column",height:"100%",paddingY:2,maxWidth:"233"},a.a.createElement(_e,{name:l,emails:i||[],users:u,viewerId:r}),a.a.createElement(d.b,{flex:"grow",display:"flex",direction:"column"},s?a.a.createElement(we,{message:s,viewerId:r}):null)),s?a.a.createElement(Ce,s):null),this.state.unread>0?a.a.createElement("span",{className:"conversationUnreadMark"}):null,a.a.createElement(_.a,{className:"conversationCloseButton",hasText:!0,onClick:this.handleHideConversation,text:c.a._("×","close button"),type:"borderless"}))}},{key:"render",value:function(){var e=this.props.data,t=e.board,n=e.users;return n&&n.length?t?a.a.createElement(G.b,{onClick:this.handleConversationItemClick,to:t.url},this.renderItemContent()):a.a.createElement("div",{onClick:this.handleConversationItemClick,role:"button"},this.renderItemContent()):null}}])&&he(n.prototype,o),i&&he(n,i),t}();var ke=Object(o.connect)(function(e){return{viewerId:e.viewer.id}})(Oe);function Ie(e){var t=e.onClickRemove,n=e.tokenizedItems;return r.createElement("div",{className:"reactTokenizedInputContainer",style:{zIndex:1e3}},r.createElement("div",{className:"tokenContainer"},n.map(function(e,n){return r.createElement("div",{className:"tokenItem",key:n,style:{position:"relative"}},r.createElement(_.a,{className:"tokenRemove",onClick:function(){return t(n)},showText:!1,text:c.a._("close conversation chathead"),type:"borderless"},r.createElement(d.b,{position:"absolute",color:"lightGray",display:"flex",alignItems:"center",justifyContent:"center",width:12,height:12,dangerouslySetInlineStyle:{__style:{borderRadius:6}}},r.createElement(d.n,{icon:"cancel",accessibilityLabel:"",size:5,color:"darkGray"}))),"string"!=typeof e?r.createElement(d.a,{size:"sm",name:e.full_name,src:e.is_default_image?void 0:e.image_large_url}):r.createElement(d.a,{size:"sm",name:e}))}),n.length>0?r.createElement(d.b,{width:5}):null),r.createElement("div",{className:"textFieldContainer"}))}function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pe=8,Ae=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=new Array(i),d=0;d<i;d++)s[d]=arguments[d];return r=this,o=(e=Ne(t)).call.apply(e,[this].concat(s)),n=!o||"object"!==Se(o)&&"function"!=typeof o?xe(r):o,Te(xe(xe(n)),"state",{contactCounter:0,selectedEmails:{},selectedUsers:{},tokenizedItems:[],value:""}),Te(xe(xe(n)),"onHandleContactClick",function(e,t){var r=n.state,a=r.selectedEmails,o=r.selectedUsers,i=e?o:a,c=e?t.id:t,s=i[c];i[c]=!s,s?n.removeTokenItem(t):n.addTokenItem(t)}),Te(xe(xe(n)),"getSelectedEmails",function(){var e=n.state.selectedEmails;return Object.keys(e).filter(function(t){return e[t]})}),Te(xe(xe(n)),"getSelectedUsers",function(){var e=n.state.selectedUsers;return Object.keys(e).filter(function(t){return e[t]})}),Te(xe(xe(n)),"handleTypeaheadKeyDown",function(e){var t=n.state,r=t.contactCounter,a=t.selectedEmails,o=t.selectedUsers,i=t.tokenizedItems,c=t.value;if(e.keyCode===Pe&&r&&!c){var s=i.pop();(!!s.id?o:a)[s.id||s]=!1,n.setState({contactCounter:r-1,tokenizedItems:i})}}),Te(xe(xe(n)),"handleInviteItemClick",function(e,t){var r=n.state,a=r.selectedUsers,o=r.selectedEmails,i=t?a:o,c=e.id||e;i[c]||(i[c]=!0,n.addTokenItem(e))}),Te(xe(xe(n)),"handleRemoveItem",function(e){var t=n.state.tokenizedItems[e];n.removeTokenItem(t)}),Te(xe(xe(n)),"handleSendMessage",function(){var e=n.getSelectedEmails(),t=n.getSelectedUsers(),r=n.props.dispatch;l.a.create("ConversationsResource",{user_ids:t,emails:e,text:null}).callCreate().then(function(e){var t=e&&e.resource_response.data;r(Object(u.c)(t)),r(Object(u.h)(t.id)),r(Object(u.g)(t.id))})}),Te(xe(xe(n)),"addTokenItem",function(e){var t=n.state,r=t.contactCounter,a=t.tokenizedItems;n.setState({contactCounter:r+1,tokenizedItems:a.concat([e]),value:""})}),Te(xe(xe(n)),"removeTokenItem",function(e){var t=n.state,r=t.contactCounter,a=t.tokenizedItems,o=t.selectedUsers,i=t.selectedEmails;(!!e.id?o:i)[e.id||e]=!1,e.id?n.setState({contactCounter:r-1,tokenizedItems:a.filter(function(t){return t.id!==e.id})}):n.setState({contactCounter:r-1,tokenizedItems:(a||[]).filter(function(t){return t!==e})})}),Te(xe(xe(n)),"renderSendMessageButton",function(){return a.a.createElement(_.a,{className:"sendNewMessageButton",hasText:!0,onClick:n.handleSendMessage,showText:!0,text:c.a._("Next","open the new chat"),type:"borderless"})}),Te(xe(xe(n)),"renderCancelMessageButton",function(){var e=n.props.handleCancelNewMessageClick;return a.a.createElement(_.a,{className:"cancelNewMessageView cancelButton",hasText:!0,onClick:e,showText:!0,text:c.a._("Cancel","cancel new message view"),type:"borderless"})}),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(t,r["Component"]),n=t,(o=[{key:"getContactItem",value:function(e,t,n){var r=e.emails,a=e.users;return n&&a?a[0].id===t?a[1]:a[0]:r[0]}},{key:"render",value:function(){var e=this,t=this.props,n=t.conversationItems,r=t.viewerId,o=this.state,i=o.contactCounter,s=o.selectedUsers,l=o.selectedEmails,u=o.value,f=new Set,p=n.map(function(t,n){var o=t.emails,i=t.users;o||(o=[]),i||(i=[]);var c=i.length+o.length;if(c>0&&c<=2){var u=0===o.length,d=e.getContactItem(t,r,u);if(d){var p=d.id||d;if(!f.has(p))return f.add(p),a.a.createElement(O,{className:"conversationContactContainer",contactItem:d,conversationItem:t,currentUserID:r,handleContactWrapperClick:e.onHandleContactClick,isSelected:s[p]||l[p],isUser:u,key:p+"-".concat(n),isEnabledNewMessageExp:!1})}}return null});return a.a.createElement("div",null,a.a.createElement(d.b,{display:"flex",justifyContent:"between",padding:3},a.a.createElement(d.K,{size:"sm",color:"gray"},c.a._("New message","conversations")),i>0?this.renderSendMessageButton():this.renderCancelMessageButton()),a.a.createElement(d.b,{color:"lightGray",display:"flex",padding:3},a.a.createElement(d.b,{display:"flex",alignItems:"center",marginRight:2},a.a.createElement(d.K,{size:"sm"},c.a._("To:","new message"))),a.a.createElement(d.b,{display:"flex",position:"relative",flex:"grow"},a.a.createElement(Ie,{tokenizedItems:this.state.tokenizedItems,onClickRemove:this.handleRemoveItem}),a.a.createElement(k.a,{changeOnTextHover:!1,className:"reactNewMessageTypeahead",onChange:function(t){return e.setState({value:t})},onInviteItemClick:this.handleInviteItemClick,onKeyDown:this.handleTypeaheadKeyDown,showInputPlaceholder:!1,value:this.state.value}))),u?null:a.a.createElement("div",{className:"contactsContainer"},p))}}])&&je(n.prototype,o),i&&je(n,i),t}(),Be=Object(se.compose)(Object(o.connect)(function(e){return{viewerId:e.viewer.id}}))(Ae);function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var He=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=Le(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==qe(a)&&"function"!=typeof a?ze(r):a,Ue(ze(ze(n)),"state",{boardInviteAccepted:!1,boardInvitePending:!0,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1}),Ue(ze(ze(n)),"handleInviteResponse",function(e){var t=n.props,r=t.boardInviteItem,a=t.onDeclineRequest,o=r.board,i=void 0===o?{}:o,c=r.invited_user,s=void 0===c?{}:c;n.setState({isAcceptButtonLoading:e,isIgnoreButtonLoading:!e});var u={board_id:i.id,invited_user_id:s.id},d=l.a.create("BoardInviteResource",u);(e?d.callUpdate():d.callDelete()).then(function(){n.setState({boardInviteAccepted:e,boardInvitePending:!1,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1}),!e&&a&&a()})}),n}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(t,r["Component"]),n=t,(o=[{key:"getBoardRep",value:function(e,t){return a.a.createElement("div",{className:"leftObjectWrapper boardRepWrapper"},a.a.createElement("div",{className:"Image Module boardMessageRep"},a.a.createElement("div",{className:"heightContainer"},a.a.createElement("img",{alt:e,src:t}))))}},{key:"getBoardInfo",value:function(e,t){return a.a.createElement("a",{href:t},a.a.createElement("div",{className:e},e))}},{key:"getInviteeInfo",value:function(e){var t=e.full_name;return a.a.createElement("div",{className:"inviterLine"},Object(i.i)(c.a._("{{ fullName }} invited you to this board"),{fullName:t}))}},{key:"getRequesterInfo",value:function(e){var t=e.username,n=e.full_name,r=Object(i.i)(c.a._('<a href="/{{ username }}/">{{ fullName }}</a> wants to join your board'),{fullName:n,username:t});return a.a.createElement("div",{className:"requesterLine"},a.a.createElement("span",{dangerouslySetInnerHTML:{__html:r}}))}},{key:"getJoinedText",value:function(e){var t=e.username,n=e.full_name,r=Object(i.i)(c.a._('<a href="/{{ username }}/">{{ fullName }}</a> joined your board'),{fullName:n,username:t});return a.a.createElement("div",{className:"requesterLine"},a.a.createElement("span",{dangerouslySetInnerHTML:{__html:r}}))}},{key:"renderPendingLayout",value:function(e,t,n){var r=this,o=e.image_thumbnail_url,i=e.name,s=e.url,l=n?s+"invite":s;return a.a.createElement("div",{className:"pending"},a.a.createElement("div",{className:"left"},this.getBoardRep(i,o),a.a.createElement("div",{className:"description"},this.getBoardInfo(i,l),n?this.getRequesterInfo(t):this.getInviteeInfo(t))),a.a.createElement("div",{className:"actions"},a.a.createElement(_.a,{className:"remove",loading:this.state.isIgnoreButtonLoading,onClick:function(){return r.handleInviteResponse(!1)},text:c.a._("Decline","decline board collaborator invite or request")}),a.a.createElement(_.a,{className:D()("primary","accept"),loading:this.state.isAcceptButtonLoading,onClick:function(){return r.handleInviteResponse(!0)},text:c.a._("Accept","accept board invite")})))}},{key:"renderCompletedLayout",value:function(e,t,n){var r=e.image_thumbnail_url,o=e.name,i=e.url;return a.a.createElement("div",{className:"success displayed"},a.a.createElement("div",{className:"left"},this.getBoardRep(o,r),a.a.createElement("div",{className:"description"},this.getBoardInfo(o,i),a.a.createElement("div",{className:"inviterLine"},n?this.getJoinedText(t):c.a._("You joined this board","board invites")))))}},{key:"render",value:function(){if(!this.state.boardInvitePending&&!this.state.boardInviteAccepted)return null;var e=this.props.boardInviteItem,t=e.board,n=e.invited_by_user,r=e.invited_user,o=n.id===r.id;return a.a.createElement("div",{className:"BoardInvite Module news"},this.state.boardInvitePending?this.renderPendingLayout(t,n,o):this.renderCompletedLayout(t,n,o))}}])&&De(n.prototype,o),s&&De(n,s),t}();function Fe(e){var t=e.boardInvites,n=e.boardJoinRequests,r=e.onDeclineRequest;return t||n?a.a.createElement("div",null,n?n.map(function(e){return a.a.createElement(d.b,{key:e.id},a.a.createElement(He,{boardInviteItem:e,onDeclineRequest:r}),a.a.createElement(d.j,null))}):null,t?t.map(function(e){return a.a.createElement(d.b,{key:e.id},a.a.createElement(He,{boardInviteItem:e,onDeclineRequest:r}),a.a.createElement(d.j,null))}):null):null}var Ge=n("nX0T"),We=n("6oz1");function Ve(e){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xe(e,t){return(Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qe=500,$e="existingConversationsView",et="newMessageView",tt="contactRequestsView",nt=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return r=this,a=(e=Ye(t)).call.apply(e,[this].concat(i)),n=!a||"object"!==Ve(a)&&"function"!=typeof a?Je(r):a,Ze(Je(Je(n)),"state",{currentView:$e,hoverColor:"transparent"}),Ze(Je(Je(n)),"handleCancelSecondaryView",function(){n.setState({currentView:$e})}),Ze(Je(Je(n)),"handleNewMessageButtonClick",function(){n.setState({currentView:et}),n.logNewMessageButtonClick()}),Ze(Je(Je(n)),"handleViewContactRequestsClick",function(){n.setState({currentView:tt})}),Ze(Je(Je(n)),"handleScroll",function(){n.props.isFetching||(n._container&&n._container.scrollHeight-n._container.scrollTop-n._container.clientHeight)<Qe&&n.fetchMore()}),Ze(Je(Je(n)),"handleMouseHoverSVG",function(){n.setState({hoverColor:"rgba(0, 0, 0, 0.06)"})}),Ze(Je(Je(n)),"handleMouseLeaveSVG",function(){n.setState({hoverColor:"transparent"})}),Ze(Je(Je(n)),"logNewMessageButtonClick",function(){Object(me.a)(101,{component:54,element:275})}),Ze(Je(Je(n)),"handleDismiss",function(){var e=n.props.onDismiss;Q.default.increment("web_messaging.close_from_conversation_panel"),e()}),Ze(Je(Je(n)),"handleBoardInvitesDidUpdate",function(){var e=n.props,t=e.boardInvites,r=e.boardJoinRequests;t.refreshData(),r.refreshData()}),Ze(Je(Je(n)),"handleContactRequestsDidUpdate",function(){n.props.contactRequests.refreshData()}),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){this.props.isFullAuth&&this._container.addEventListener("scroll",this.handleScroll),Object(me.a)(7161,{})}},{key:"componentWillUnmount",value:function(){this._container.removeEventListener("scroll",this.handleScroll)}},{key:"fetchMore",value:function(){var e=this.props,t=e.isAtEnd,n=e.isFetching,r=e.fetchMoreData,a=e.isFullAuth;!n&&a&&(t?this._container.removeEventListener("scroll",this.handleScroll):r())}},{key:"renderNewMessageView",value:function(){var e=this,t=this.props.conversations,n=void 0===t?[]:t;return a.a.createElement("div",{className:"newMessageContainer"},a.a.createElement(We.a,{name:"web_new_message_names"},function(t){var r=t.group;return["employees","enabled"].includes(r)?a.a.createElement(B,{conversationItems:n,handleCancelNewMessageClick:e.handleCancelSecondaryView}):a.a.createElement(Be,{conversationItems:n,handleCancelNewMessageClick:e.handleCancelSecondaryView})}))}},{key:"renderContactRequestsView",value:function(){var e=this.props.activateContactRequestsInboxExperiment;return["employees","enabled"].includes(e()||"")?a.a.createElement(fe,{showAllRequests:!0,handleCancelViewContactRequests:this.handleCancelSecondaryView}):a.a.createElement("div",{className:"contactRequestsContainer"},a.a.createElement(F,{handleCancelViewContactRequests:this.handleCancelSecondaryView}))}},{key:"renderEmptyMessagesNewMessageUpsell",value:function(){var e=this;return this.shouldShowEmptyState&&a.a.createElement(We.a,{name:"web_compose_message_button_position"},function(t){return t.anyEnabled?e.renderOldEmptyState():a.a.createElement(We.a,{name:"web_empty_state_for_inbox"},function(t){return t.anyEnabled?e.renderNewEmptyState():e.renderOldEmptyState()})})}},{key:"renderOldEmptyState",value:function(){return a.a.createElement("div",{className:"EmptyConversations Module"},a.a.createElement("div",{className:"icon"}),a.a.createElement("div",{className:"intro"},a.a.createElement("div",null,c.a._("Send messages to your friends!")),a.a.createElement("div",null,c.a._("Plan projects, swap ideas and share your best discoveries."))))}},{key:"renderNewEmptyState",value:function(){return a.a.createElement(d.b,{marginTop:12,padding:12,alignItems:"start"},a.a.createElement(d.m,{size:"sm",color:"darkGray"},c.a._("Share ideas with your friends","introduction message when inbox is empty")),a.a.createElement(d.b,{marginTop:6},a.a.createElement(d.c,{text:c.a._("New message","compose button for inbox empty state"),onClick:this.handleNewMessageButtonClick,size:"md",color:"red",accessibilityLabel:c.a._("composeNewMessage","accessibility label for compose button when inbox is empty"),inline:!0})))}},{key:"renderExistingConversationsView",value:function(){var e=this,t=this.props,n=t.conversations,o=void 0===n?[]:n,i=t.isAtEnd,s=t.activateContactRequestsInboxExperiment,l=t.boardJoinRequests,u=t.boardInvites,f=t.contactRequests,p=["employees","enabled"].includes(s()||"");return a.a.createElement(We.a,{name:"web_compose_message_button_position"},function(t){var n=t.group,s=n.startsWith("enabled"),m=n.startsWith("enabled_on_the_bottom")||n.startsWith("enabled_employees"),b=n.startsWith("enabled_top_left");return a.a.createElement("div",{className:"existingConversationsContainer"},a.a.createElement(d.b,{position:"relative"},a.a.createElement(d.b,{position:"absolute",right:!0,dangerouslySetInlineStyle:{__style:{padding:10}}},s?a.a.createElement(d.o,{onClick:e.handleDismiss,icon:"cancel",iconColor:"gray",size:"sm",accessibilityLabel:c.a._("closeConversationPanel","accessibility label for cancel icon button")}):a.a.createElement(d.o,{onClick:e.handleNewMessageButtonClick,icon:"compose",iconColor:"gray",size:"sm",accessibilityLabel:c.a._("composeNewMessage","accessibility label for compose icon button")})),b&&a.a.createElement(d.b,{position:"absolute",left:!0,dangerouslySetInlineStyle:{__style:{padding:10}}},a.a.createElement(d.o,{onClick:e.handleNewMessageButtonClick,icon:"compose",iconColor:"gray",size:"sm",accessibilityLabel:c.a._("composeNewMessage","accessibility label for compose button")})),a.a.createElement(d.b,{paddingY:4,dangerouslySetInlineStyle:{__style:{paddingRight:"25%",paddingLeft:"25%"}}},a.a.createElement(d.K,{bold:!0,size:"md",align:"center"},c.a._("Messages","header text for conversations dropdown")))),p?a.a.createElement(fe,{onClick:e.handleViewContactRequestsClick}):e.shouldShowContactRequestButton&&a.a.createElement("div",{className:"viewContactRequestsButtonContainer"},a.a.createElement(H,{onClick:e.handleViewContactRequestsClick})),a.a.createElement("div",{className:"existingConversationItemsWrapper"},!p&&a.a.createElement(r.Fragment,null,a.a.createElement("div",{className:"boardInvitesContainer"},a.a.createElement(Fe,{boardInvites:u&&u.data||[],boardJoinRequests:l&&l.data||[],onDeclineRequest:e.handleBoardInvitesDidUpdate})),a.a.createElement("div",{className:"boardInviteContactRequestsContainer"},a.a.createElement(E,{contactRequests:f&&f.data||[],onDeclineRequest:e.handleContactRequestsDidUpdate}))),")",a.a.createElement(d.b,{position:"relative"},a.a.createElement(d.b,{position:"absolute",width:"100%",top:!0,marginBottom:12},a.a.createElement("ul",{className:"conversationItems"},0===o.length&&i?e.renderEmptyMessagesNewMessageUpsell():o.map(function(e,t){return a.a.createElement("li",{className:"conversationItemWrapper",key:e.id},a.a.createElement(ke,{data:e}),t<o.length-1?a.a.createElement(d.j,null):null)})))),m&&a.a.createElement(d.b,{bottom:!0,width:"100%",position:"absolute",dangerouslySetInlineStyle:{__style:{padding:14,background:"white"}}},a.a.createElement(d.c,{text:c.a._("New message","compose button on the conversation panel"),onClick:e.handleNewMessageButtonClick,size:"sm",accessibilityLabel:c.a._("composeNewMessage","accessibility label for compose button")}))))})}},{key:"renderMessageView",value:function(){switch(this.state.currentView){case $e:return this.renderExistingConversationsView();case et:return this.renderNewMessageView();case tt:return this.renderContactRequestsView()}}},{key:"render",value:function(){var e=this;return a.a.createElement(Ge.a,{view:42,viewParameter:203},a.a.createElement("div",{className:"conversationPanel",ref:function(t){e._container=t}},this.renderMessageView()))}},{key:"shouldShowEmptyState",get:function(){var e=this.props,t=e.boardInvites,n=e.boardJoinRequests,r=e.contactRequests;return 0===(t&&t.data||[]).length+(n&&n.data||[]).length+(r&&r.data||[]).length}},{key:"shouldShowContactRequestButton",get:function(){var e=this.props.contactRequests;return(e&&e.data||[]).length>0}}])&&Ke(n.prototype,o),i&&Ke(n,i),t}();function rt(e){return e.sort(function(e,t){return new Date((t.last_message||t).created_at)-new Date((e.last_message||e).created_at)}),e}t.a=Object(se.compose)(Object(o.connect)(function(e){var t,n=e.conversations,r=e.viewer;return{conversations:rt((t=n.data,Object.keys(t).map(function(e){return t[e]})).filter(function(e){return e.users.length>1&&e.last_message})),isFullAuth:r.isAuth&&!r.isLimitedLogin}}),Object(L.b)({name:"ConversationsResource",key:"conversationsResource"},{allowStale:!1}),Object(ce.b)({name:"BoardOwnerCollaboratorJoinRequestsResource",key:"boardJoinRequests",options:{field_set_key:"news"}},{allowStale:!1}),Object(ce.b)({name:"ContactRequestsResource",key:"contactRequests"},{allowStale:!1}),Object(ce.b)({name:"BoardInvitesResource",key:"boardInvites",options:{current_user:!0,field_set_key:"news"}},{allowStale:!1}))(nt)},nM9s:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n("d6ZO"),a=(n.n(r),n("FHH+")),o=n("GGB8"),i=n.n(o),c=n("cy6F");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return r=this,o=(e=u(t)).call.apply(e,[this].concat(c)),n=!o||"object"!==s(o)&&"function"!=typeof o?f(r):o,p(f(f(n)),"handleClick",function(e){e&&e.preventDefault(),n.props.loading||(n.props.src?Object(a.a)(n.props.src):n.props.onClick&&n.props.onClick(e),n.props.stopPropagation&&e.stopPropagation())}),n}var n,o,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.accessibilityLabel,n=e.children,a=e.disabled,o=e.hasIcon,s=e.htmlType,l=e.id,u=e.itemProp,d=e.large,f=e.loading,p=e.onMouseDown,m=e.onMouseEnter,b=e.onMouseLeave,h=e.rel,v=e.rounded,y=e.showText,g=e.style,E=e.text,_=e.type,w=i()(this.props.className,{Button:"plain"!==_,Module:"plain"!==_,btn:"borderless"!==_&&"plain"!==_,hasIcon:o,hasText:y,rounded:!0===v,leftRounded:"left"===v,rightRounded:"right"===v,borderless:"borderless"===_,primary:"primary"===_,disabled:a,large:d});return r.createElement("button",{"aria-label":t||null,className:w,disabled:a,id:l,itemProp:u,onClick:this.handleClick,onMouseDown:p,onMouseEnter:m,onMouseLeave:b,rel:h,style:g,type:s},f?r.createElement(c.a,{size:"small"}):null,n,o?r.createElement("em",null):null,r.createElement("span",{className:y?"buttonText":"accessibilityText"},E))}}])&&l(n.prototype,o),m&&l(n,m),t}();p(m,"defaultProps",{disabled:!1,htmlType:"button",large:!1,rounded:!0,showText:!0,type:"default"})},"pN+K":function(e,t,n){"use strict";t.a=y,t.c=function(e){var t=e.name,n=e.options;return Object(a.connect)(_({name:t,options:n||{}}))};var r=n("d6ZO"),a=(n.n(r),n("DUIN")),o=n("lJK6"),i=n("FfPm"),c=n("IaRT"),s=(n.n(c),n("S+Qs"));function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function d(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){v(e,t,n[t])})}return e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){return Object(o.a)("function"==typeof e?e(t):e||{})}var g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var a,o;return o=a=function(a){function o(){var n,r,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];return a=this,i=(n=m(o)).call.apply(n,[this].concat(u)),r=!i||"object"!==l(i)&&"function"!=typeof i?h(a):i,v(h(h(r)),"loadData",function(n){var r=t;e.forEach(function(e){var t=e.options,a=e.name,o="function"==typeof t?t(n):t;n.dispatch(Object(s.a)(a,o,void 0,void 0,r.traceLoggerHandlerName))})}),v(h(h(r)),"loadMoreData",function(n){var r=t;e.forEach(function(e){var t=e.options,a=e.name,o="function"==typeof t?t(n):t;n.dispatch(Object(s.d)(a,o,void 0,void 0,r.traceLoggerHandlerName))})}),v(h(h(r)),"resourcesHash",JSON.stringify(e.map(function(e){return f({},e,{options:y(e.options,r.props)})}))),r}var i,c,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,r["Component"]),i=o,(c=[{key:"componentDidMount",value:function(){!1!==t.allowStale&&this.props.resourceLoaded||this.loadData(this.props)}},{key:"shouldComponentUpdate",value:function(e){var t,n,r=d(Object.keys(this.props)).concat(d(Object.keys(e))),a=!0,o=!1,i=void 0;try{for(var c,s=r[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var l=c.value;if("resourceData"===l){if(t=this.props.resourceData,n=e.resourceData,JSON.stringify(t)!==JSON.stringify(n))return!0}else if(this.props[l]!==e[l])return!0}}catch(e){o=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(o)throw i}}return!1}},{key:"UNSAFE_componentWillUpdate",value:function(t){!this.props.resourceLoaded&&t.resourceLoaded&&this.props.onResourceLoaded&&this.props.onResourceLoaded(),!this.props.error&&t.error&&this.props.onResourceError&&this.props.onResourceError(t.error);var n=JSON.stringify(e.map(function(e){return f({},e,{options:y(e.options,t)})}));this.resourcesHash!==n&&(this.loadData(t),this.resourcesHash=n)}},{key:"render",value:function(){var e=this,t=this.props,a=t.error,o=t.isAtEnd,i=t.isFetching,c=t.resourceData,s=t.resourceLoaded,l=u(t,["error","isAtEnd","isFetching","resourceData","resourceLoaded"]);return delete l.onResourceError,delete l.onResourceLoaded,r.createElement(n,Object.assign({},c,l,{error:a,fetchMoreData:function(){return e.loadMoreData(e.props)},isAtEnd:o,isFetching:i,refreshData:function(){return e.loadData(e.props)},resourceLoaded:s}))}}])&&p(i.prototype,c),g&&p(i,g),o}(),v(a,"WrappedComponent",n),v(a,"displayName",1===e.length?e[0].name:"".concat(e.length," resources")),o}},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r,o={name:e.name,options:e.options||{},key:e.key||"data"};return Object(a.connect)((r={},function(e){return function(t,n){var a,o=t.resources,c=o.fetching,s=o.data,l=e.some(function(e){var t=e.name,r=e.options;return c[t]&&c[t][y(r,n)]}),u={},d=[];e.forEach(function(e){var t=e.name,o=e.options,c=e.key;if(s[t]){var l=y(o,n);if(r[t]||(l in s[t]?i.default.increment("webapp.withResource.cache-hit",.05,{resource:t,cache_size:Object.keys(s[t]).length,level:"success",v:1}):Object.keys(s[t]).length?i.default.increment("webapp.withResource.populated-cache-miss",.05,{resource:t,cache_size:Object.keys(s[t]).length,level:"error",v:1}):i.default.increment("webapp.withResource.empty-cache-miss",.05,{resource:t,cache_size:Object.keys(s[t]).length,level:"warn",v:1})),r[t]=!0,s[t][l]){var f=s[t][l],p=f.data,m=f.nextBookmark,b=f.error;u[c]=p,d.push(m),b&&(a=b)}}else i.default.increment("webapp.withResource.no-cache",.05,{resource:t,cache_size:0,level:"error",v:1})});var f=e.every(function(e){var t=e.key;return void 0!==u[t]});return{resourceLoaded:f,isAtEnd:f&&!l&&d.every(function(e){return"-end-"===e}),isFetching:l,nextBookmark:d[0],resourceData:u,error:a}}})([o]))(g([o],t)(n))}};t.b=E;var _=function(e){var t=e.name,n=e.options;return function(e,r){var a=e.resources.data;if(a[t]){var o=y(n,r);if(a[t][o])return{data:a[t][o].data}}return{data:null}}}},tZWC:function(e,t,n){"use strict";var r=n("d6ZO"),a=n.n(r),o=n("DUIN"),i=n("GGB8"),c=n.n(i),s=n("PrM5"),l=n("W/Cr"),u=n("XSNT"),d=(n("IaRT"),n("z/23")),f=n("9bGG"),p=n("gEaE");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var g=function(e){function t(){var e,n,r,o,i,c,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,d=new Array(u),f=0;f<u;f++)d[f]=arguments[f];return r=this,o=(e=h(t)).call.apply(e,[this].concat(d)),n=!o||"object"!==m(o)&&"function"!=typeof o?y(r):o,i=y(y(n)),s=function(e){var t=n.props.inviteQueue;if(!t)return null;var r={text:l.a._("Add","Add board collaborator invite"),color:"red",size:"sm"};return t&&t[e]&&(r.text=l.a._("Remove","Remove a board collaborator invite"),r.color="gray"),a.a.createElement(p.c,r)},(c="renderInviteButton")in i?Object.defineProperty(i,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[c]=s,n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,r["Component"]),n=t,(o=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){!this.props.isHovering&&e.isHovering?this.props.onHoverStart():this.props.isHovering&&!e.isHovering&&this.props.onHoverEnd()}},{key:"render",value:function(){var e=this.props,t=e.is_pinner?l.a._("On Pinterest"):e.email?e.email:"facebook_non_pinner"===e.type?l.a._("Facebook"):"gplus_non_pinner"===e.type?l.a._("Google"):l.a._("Enter an email address");return a.a.createElement("a",Object.assign({},this.props.hoverHandlers,{onClick:this.props.onClick,role:"button"}),a.a.createElement(p.b,{position:"relative"},e.send_pin_image?a.a.createElement("span",{className:"typeaheadImg"},a.a.createElement("img",{alt:"",src:e.send_pin_image})):null,a.a.createElement("p",{className:c()("typeaheadName",{hasImage:e.send_pin_image})},e.label),a.a.createElement("div",{className:"titleWrapper"},a.a.createElement("i",{className:c()("titleIcon",{isPinner:e.is_pinner},{isFacebook:"facebook_non_pinner"===e.type},{isGplus:"gplus_non_pinner"===e.type})}),a.a.createElement("p",{className:"title"},t)),a.a.createElement(p.b,{top:!0,right:!0,position:"absolute",width:90},this.renderInviteButton(e.id))))}}])&&b(n.prototype,o),i&&b(n,i),t}(),E=Object(f.a)(g),_=n("Svvu"),w=n("cD7N");function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=_.default.FACEBOOK,k=_.default.GPLUS,I=_.default.TWITTER,S=_.default.YAHOO;function j(e){var t,n=e.network,r=(C(t={},O,l.a._("Find friends from Facebook")),C(t,k,l.a._("Find friends from Google+")),C(t,I,l.a._("Find friends from Twitter")),C(t,S,l.a._("Find friends from Yahoo")),t);return a.a.createElement("div",{className:"socialConnect",role:"listitem"},a.a.createElement(p.P,{onTouch:function(){return function(e){w.a.instance().handleConnect(e,!0,{})}(n)},fullWidth:!1},a.a.createElement("div",{className:"socialConnectItem"},a.a.createElement("div",{className:"left"},a.a.createElement("div",{className:c()("icon","socialConnect-".concat(n))},a.a.createElement("em",null))),a.a.createElement("div",{className:"right"},a.a.createElement("h4",{className:"title"},r[n])))))}var N=n("skut"),R=n("Cjb7"),x=n("5tOk"),T=n("woYD"),P=n("T0l7");function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U=[_.default.FACEBOOK,_.default.TWITTER,_.default.GPLUS],H=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];return r=this,o=(e=D(t)).call.apply(e,[this].concat(l)),n=!o||"object"!==A(o)&&"function"!=typeof o?M(r):o,z(M(M(n)),"state",{networks:n.props.viewer.isAuth?n.props.viewer.socialNetwork:null,open:!1,typeaheadSuggestions:[]}),z(M(M(n)),"onUserInviteClick",function(e){var t=e.id,r=e.full_name,a=n.props,o=a.boardId,i=a.onInviteItemClick;o?i(Object(P.d)(o,[t]),{type:"user",userName:r}):i(e,!0)}),z(M(M(n)),"handleBodyClick",function(e){n._results.contains(e.target)||n.setState({open:!1})}),z(M(M(n)),"handleTypeaheadSuggestionsChange",function(e){var t=n.props.viewer;n.setState({typeaheadSuggestions:(e||[]).filter(function(e){return e.id!==t.id})})}),z(M(M(n)),"handleOnEmailInviteClick",function(){var e=n.props,t=e.boardId,r=e.onInviteItemClick,a=e.value;t?r(Object(P.c)(t,[a]),{type:"email",email:a}):r(a,!1)}),z(M(M(n)),"subscriber",R.b.subscribe("currentUser","socialNetworkUpdated",function(e,t,r){n.setState({networks:Object(s.a)(r)})})),z(M(M(n)),"logTypeaheadInput",function(e){Object(T.a)(4113,{component:13029,element:1043,entered_query:e})}),z(M(M(n)),"logSearchContactItemClick",function(e){var t=n.props.value;Object(T.a)(101,{component:13029,element:1044,entered_query:t,result_index:e})}),z(M(M(n)),"renderResultItems",function(){var e=n.props,t=e.changeOnTextHover,r=e.inviteQueue,o=e.isComposeMessageExpEnabled,i=c()("Typeahead","userSelect",{open:n.state.open}),s=n.state.typeaheadSuggestions.map(function(e,o){return a.a.createElement(E,Object.assign({key:o,onClick:function(){n.onUserInviteClick(e),n.logSearchContactItemClick(o)},onHoverEnd:function(){return t?n.restoreTextFieldValue():null},onHoverStart:function(){return t?n.forceTextFieldValue(e.label):null},inviteQueue:r},e))}).concat(n.getStaticItems()).map(function(e,t){return a.a.createElement("li",{key:t},e)}),l=o?{overflow:"visible",zIndex:1e3,marginTop:4,borderTop:"none"}:{overflow:"auto",zIndex:1e3};return a.a.createElement("div",{className:i,ref:function(e){n._results=e},style:l},a.a.createElement("ul",null,s))}),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e=this;["mousedown","touchstart"].forEach(function(t){document.addEventListener(t,e.handleBodyClick)})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.value;this.setState({open:t.length>0})}},{key:"componentWillUnmount",value:function(){var e=this;["mousedown","touchstart"].forEach(function(t){document.removeEventListener(t,e.handleBodyClick)}),this.subscriber.unsubscribe()}},{key:"getStaticItems",value:function(){return B(this.getEmailItems()).concat(B(this.getSocialItems(this.state.networks)))}},{key:"getEmailItems",value:function(){var e=this.props.value;return[a.a.createElement(d.a,{email:e,isValid:Object(x.g)(e),key:"send-to-email-component",onClick:this.handleOnEmailInviteClick,showSendEmailText:!1})]}},{key:"getSocialItems",value:function(e){return U.filter(function(t){return!e||!1===e[t].connected}).map(function(e,t){return a.a.createElement(j,{key:"socialConnect-".concat(e),network:e})})}},{key:"forceTextFieldValue",value:function(e){this.previousValue=this.props.value,this.props.onChange(e)}},{key:"restoreTextFieldValue",value:function(){this.props.onChange(this.previousValue),delete this.previousValue}},{key:"render",value:function(){var e=this,t=this.props,n=t.boardId,r=t.className,o=t.inBoardCollaboratorInviter,i=t.onChange,s=t.onKeyDown,d=t.showInputPlaceholder,f=t.isComposeMessageExpEnabled,p=t.value,m=c()("Input","field",{reactCollaboratorInviterTypeaheadCustom:o},{collaboratorInviterTypeahead:!o}),b=n?{board:n}:null,h=f?l.a._("Enter name or email","search"):l.a._("Name or email","search");return a.a.createElement(N.a,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",resourceOptions:b,value:p},a.a.createElement("div",{className:c()(r,"reactSocialTypeahead")},a.a.createElement("div",{className:c()("TypeaheadField","userSelect","inputContainer",{socialInboxTypeahead:f})},a.a.createElement(u.a,{className:m,id:"collaboratorInviterTypeahead",onChange:function(t){i(t),e.logTypeaheadInput(t)},onKeyDown:s,placeholder:d?h:null,value:p,focused:!0})),this.renderResultItems()))}}])&&q(n.prototype,o),i&&q(n,i),t}();z(H,"defaultProps",{changeOnTextHover:!1,onKeyDown:function(){},showInputPlaceholder:!0,isComposeMessageExpEnabled:!1});t.a=Object(o.connect)(function(e){return{viewer:e.viewer}})(H)},"z/23":function(e,t,n){"use strict";t.a=function(e){var t=e.email,n=e.isValid,a=e.onClick,c=e.showSendEmailText,l=n?r.createElement("div",{className:"icon"},t[0].toUpperCase()):r.createElement("div",{className:o()("icon","typingEmail")},r.createElement("em",null)),u=n?i.a._("Click to send!"):i.a._("Keep typing!"),d=c?Object(s.i)(i.a._("Email {{ email }}"),{email:t}):Object(s.i)(i.a._("Invite {{ email }}"),{email:t});return r.createElement("div",{className:o()("sendToEmail",{unclickable:!n})},r.createElement("a",{className:"selectableEmailItem",onClick:function(){n&&a()},role:"button"},r.createElement("div",{className:"left"},l),r.createElement("div",{className:"right"},r.createElement("h4",{className:"title"},d),r.createElement("p",{className:"subtitle"},u))))};var r=n("d6ZO"),a=(n.n(r),n("GGB8")),o=n.n(a),i=n("W/Cr"),c=n("IaRT"),s=(n.n(c),n("5tOk"))}});