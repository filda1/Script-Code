webpackJsonp(["ExperienceSurveyCommon"],{"0+Oy":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("d6ZO"),o=n.n(r),a=n("W/Cr"),i=n("gEaE");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=5e3,m="surveyLoaded",p="surveyFinished",v=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(e=u(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==l(o)&&"function"!=typeof o?d(r):o,y(d(d(n)),"state",{surveyAccepted:!1,surveyLoaded:!1,surveyLoadFailed:!1}),y(d(d(n)),"processIFrameMessage",function(e){var t=n.props,r=t.presentationDelay,o=void 0===r?f:r,a=t.onComplete,i=t.onView,l=t.surveyLink,s=e.origin||e.originalEvent.origin;l.startsWith(s)&&(e.data===p?a():e.data===m&&(window.clearTimeout(n.loadSurveyFailureTimeout),n.loadSurveyTimeout=window.setTimeout(function(){i(),n.setState({surveyLoaded:!0})},o)))}),y(d(d(n)),"handleShowSurvey",function(){n.setState({surveyAccepted:!0})}),n}var n,v,b;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(v=[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("message",this.processIFrameMessage),this.loadSurveyFailureTimeout=window.setTimeout(function(){e.state.surveyLoaded||(window.clearTimeout(e.loadSurveyTimeout),e.setState({surveyLoadFailed:!0}))},15e3)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.processIFrameMessage),window.clearTimeout(this.loadSurveyTimeout),window.clearTimeout(this.loadSurveyFailureTimeout)}},{key:"render",value:function(){var e=this.state,t=e.surveyAccepted,n=e.surveyLoadFailed,r=e.surveyLoaded;if(n)return null;var l=this.props,s=l.acceptButtonText,u=l.bodyText,c=l.declineButtonText,d=l.onDismiss,y=l.subtitleText,f=l.surveyLink,m=l.titleText,p=o.a.createElement("iframe",{className:t?"PinnerSurvey":"SurveyHidden",src:f,title:a.a._("Pinterest Survey","Accessible label for survey frame")});return r?o.a.createElement("div",{style:{zIndex:1e3,position:"absolute"}},o.a.createElement(i.y,{accessibilityCloseLabel:a.a._("close","Accessible label for the modal close button"),accessibilityModalLabel:a.a._("Have a few minutes to take a survey?","User evaluation survey"),footer:!t&&o.a.createElement(i.b,{display:"flex",justifyContent:"end",deprecatedPadding:{x:1}},o.a.createElement("div",{className:"p1"},o.a.createElement(i.c,{text:c,onClick:d})),o.a.createElement("div",{className:"p1"},o.a.createElement(i.c,{color:"red",text:s,onClick:this.handleShowSurvey}))),heading:t?"":m,onDismiss:d,role:"alertdialog",size:t?"lg":"md"},o.a.createElement("div",null,p),!t&&o.a.createElement(i.b,{deprecatedPadding:3},o.a.createElement(i.K,{smSize:"xs",mdSize:"sm",lgSize:"md"},y),o.a.createElement(i.K,{smSize:"xs",mdSize:"sm",lgSize:"md"},u)))):p}}])&&s(n.prototype,v),b&&s(n,b),t}(),b=n("wUWH"),h=n("R6a3"),w=n("tmfO");function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return r=this,o=(e=E(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==S(o)&&"function"!=typeof o?T(r):o,_(T(T(n)),"state",{surveyLoaded:!1}),_(T(T(n)),"loadSurvey",function(){n.setState({surveyLoaded:!0}),n.props.view()}),_(T(T(n)),"handleDismiss",function(){n.props.dismiss(),n.setState({surveyLoaded:!1})}),_(T(T(n)),"handleComplete",function(){n.props.complete(),n.setState({surveyLoaded:!1})}),n}var n,l,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,r["Component"]),n=t,(l=[{key:"componentDidMount",value:function(){var e=this.props.displayData.delay;this.surveyTimer=window.setTimeout(this.loadSurvey,e)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.surveyTimer)}},{key:"render",value:function(){var e=this;if(!this.state.surveyLoaded)return null;var t=this.props.displayData,n=t.buttons,r=t.detailed_text,l=t.title_text;return o.a.createElement(h.a,{accessibilityCloseLabel:a.a._("close","Accessible label for the modal close button"),heading:l,accessibilityModalLabel:a.a._("Would you mind taking a survey?","User eval survey"),onDismiss:this.handleDismiss,size:"sm",footer:o.a.createElement(i.b,{display:"flex",justifyContent:"end"},n.map(function(t,n){return t.uri?o.a.createElement(i.b,{key:t.text,marginStart:1},o.a.createElement(w.b,{external:!0,to:t.uri},o.a.createElement(i.c,{color:"red",text:t.text,onClick:e.handleComplete}))):o.a.createElement(i.b,{key:t.text,marginStart:1},o.a.createElement(i.c,{text:t.text,onClick:e.handleDismiss}))}))},o.a.createElement(i.b,{padding:3},o.a.createElement(i.K,{size:"lg",smSize:"sm",mdSize:"md",lgSize:"lg"},r)))}}])&&g(n.prototype,l),s&&g(n,s),t}();t.default=function(e){var t=e.placementId;return r.createElement(b.a,{placementId:t,type:5,disableAutoView:!0},function(e){var t,n,o=e.complete,a=e.dismiss,i=e.display_data,l=e.view,s=i.anket,u=i.buttons,c=i.delay,d=i.detailed_text,y=i.subtitle_text,f=i.title_text,m=(n=2,function(e){if(Array.isArray(e))return e}(t=u)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()),p=m[0],b=m[1];return s?r.createElement(v,{acceptButtonText:b.text,bodyText:d,declineButtonText:p.text,onComplete:o,onDismiss:a,onView:l,presentationDelay:c,subtitleText:y,surveyLink:b.uri,titleText:f}):r.createElement(O,{complete:o,dismiss:a,displayData:i,view:l})})}}});