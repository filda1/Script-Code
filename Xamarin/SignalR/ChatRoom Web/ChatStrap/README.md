ChatStrap
=========

  CHATROOM = https://www.codeproject.com/Articles/562023/Asp-Net-SignalR-Chat-Room
             https://github.com/neppie/ChatStrap/blob/master/ChatStrap/Controllers/ChatHub.cs
             https://github.com/neppie/ChatStrap/blob/master/ChatStrap/Scripts/chat.js
             https://github.com/neppie/ChatStrap/blob/master/ChatStrap/Views/Home/Chat.cshtml

/////////////////////////////////////////////////////////////////////////////////////////////////////////////

Chat for default MVC5 bootstrap project.  Basically the empty project template with a chat room added.

Modified from popular project with an older version of SignalR and no bootstrap or MVC5 at :
  http://www.codeproject.com/Articles/562023/Asp-Net-SignalR-Chat-Room

_____________________ Changes from original project:

Richard Evans	14-Sep-14 16:39 
 
In my larger project also did away with the login window -- it uses the OWIN identity UserName for the chat. I didn't want to make those changes here because not everyone uses identity. In my "real" project also changed the default set-up for OWIN to use UserName rather than E-mail (Microsoft did that backwards for some reason, because their default sign-in methods also use UserName).
 
Thank you, Shakeel Iqbal, for doing the real work. These are the steps I took to create the chat from a blank MVC5 project:
 

1. Used Nuget to get the latest SignalR ("Install-Package Microsoft.AspNet.SignalR")
2. Import "ChatHub.cs" to "/Controllers"
3. Changed the "OnDisconnect()" method to use the new boolean parm in SignalR 2.1.1 
4. Imported "UserDetail" and "MessageDetail" to "/Models"
5. Imported "index.html" as "chat.cshtml" and pasted script into separate "Scripts/chat.js"
6. Imported "ChatStyle.css" to "/Content"
7. Used Nuget to install JQueryUI ("Install-Package jQuery.UI.Combined")

 
Note here I had to update all of the Jquery references to the current versions and ran into a few issues. I've pasted what my final scripts section looks like at the end. Odd that it wouldn't work until I enclosed them in all in a "@section scripts {}".
 

8. Modified "Startup.cs" for SignalR 2.1.1 as per "http://go.microsoft.com/fwlink/?LinkId=320578"
9. In the "ChatStyle.css" made div section for messages "position: fixed"
9b. in "ChatStyle.css" made the div section for users signed in to "position: relative" 
9c. in "ChatStyle.css" changed the Chat Window length from 300 to 200 (it is in three places)

 
Note that without the changes to CSS in steps 9 the user names would not position to the top of the column. Also if the chat window length is longer than display (if there has to be scroll bar within the browser to see the entire chat window) the screen would lock. There might be a better fix but the best I could do was make the chat window smaller.
 
I didn't include it as a step but obviously had to adjust namespace references to be consistent. Finally, here are the scripts arranged as mentioned,
 

@section scripts
    {
     <script src="~/Scripts/jquery-1.10.2.min.js"></script>
     <script src="~/Scripts/jquery-ui-1.11.1.js"></script>
    <!--Reference the SignalR library. -->
    <script src="~/Scripts/jquery.signalR-2.1.1.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>
    <script src="~/Scripts/chat.js"></script>
}

neppie
